"use client";
import { useState, useEffect, useContext } from "react";
import styles from "./styles.module.css";
import { DataContext } from "../../context/data";

import { Toggle } from "@ensdomains/thorin";

const Light = () => {
  return (
    <svg
      width="631"
      height="258"
      viewBox="0 0 631 258"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g clipPath="url(#clip0_76_789)">
        <path
          className={styles.greenLight}
          d="M121.209 252.914C146.571 252.914 167.132 232.354 167.132 206.991C167.132 181.629 146.571 161.068 121.209 161.068C95.8459 161.068 75.2854 181.629 75.2854 206.991C75.2854 232.354 95.8459 252.914 121.209 252.914Z"
          fill="#7FD6C2"
        />
        <path
          d="M121.209 257.917C93.128 257.917 70.283 235.072 70.283 206.99C70.283 178.91 93.128 156.065 121.209 156.065C149.289 156.065 172.134 178.91 172.134 206.99C172.135 235.072 149.289 257.917 121.209 257.917ZM121.209 166.069C98.6447 166.069 80.2878 184.426 80.2878 206.99C80.2878 229.554 98.6447 247.912 121.209 247.912C143.772 247.912 162.129 229.554 162.129 206.99C162.129 184.426 143.772 166.069 121.209 166.069Z"
          fill="#1f1f1f"
        />
        <path
          d="M94.3586 125.993H148.06V169.422H94.3586V125.993Z"
          fill="#1f1f1f"
        />
        <path
          d="M148.06 174.424H94.3576C91.5953 174.424 89.3552 172.184 89.3552 169.422V125.993C89.3552 123.231 91.5953 120.991 94.3576 120.991H148.06C150.822 120.991 153.062 123.231 153.062 125.993V169.422C153.062 172.184 150.822 174.424 148.06 174.424ZM99.3601 164.42H143.057V130.995H99.3601V164.42Z"
          fill="#1f1f1f"
        />
        <path
          className={styles.yellowLight}
          d="M251.108 252.914C276.471 252.914 297.032 232.354 297.032 206.991C297.032 181.629 276.471 161.068 251.108 161.068C225.746 161.068 205.185 181.629 205.185 206.991C205.185 232.354 225.746 252.914 251.108 252.914Z"
          fill="#F6E049"
        />
        <path
          d="M251.108 257.917C223.028 257.917 200.182 235.072 200.182 206.99C200.182 178.91 223.027 156.065 251.108 156.065C279.189 156.065 302.034 178.91 302.034 206.99C302.035 235.072 279.189 257.917 251.108 257.917ZM251.108 166.069C228.544 166.069 210.187 184.426 210.187 206.99C210.187 229.554 228.544 247.912 251.108 247.912C273.672 247.912 292.029 229.554 292.029 206.99C292.029 184.426 273.672 166.069 251.108 166.069Z"
          fill="#1f1f1f"
        />
        <path
          d="M224.257 125.993H277.958V169.422H224.257V125.993Z"
          fill="#1f1f1f"
        />
        <path
          d="M277.959 174.424H224.258C221.496 174.424 219.256 172.184 219.256 169.422V125.993C219.256 123.231 221.496 120.991 224.258 120.991H277.959C280.722 120.991 282.962 123.231 282.962 125.993V169.422C282.962 172.184 280.722 174.424 277.959 174.424ZM229.26 164.42H272.956V130.995H229.26V164.42Z"
          fill="#1f1f1f"
        />
        <path
          d="M107.872 131.016H103.762C86.852 131.016 70.5221 126.564 56.3322 118.254C42.9017 126.147 26.933 131.016 9.3175 131.016H5.00242C2.24008 131.016 0 128.776 0 126.014C0 123.252 2.24008 121.012 5.00242 121.012H9.3175C22.5179 121.012 35.3771 117.874 46.9617 111.964C44.9697 110.441 43.0358 108.834 41.1639 107.141C25.3713 92.861 15.5605 74.0149 14.2479 55.4339C13.3424 42.6017 17.4514 24.2638 28.6719 12.223C36.0724 4.28116 45.7321 0.0831299 56.6054 0.0831299C66.8973 0.0831299 76.2809 4.18711 83.7415 11.9519C95.098 23.7696 99.7012 41.12 99.225 53.0727C98.3856 74.1469 85.8415 96.5988 65.6928 111.966C76.7931 117.618 89.6683 121.013 103.761 121.013H107.871C110.633 121.013 112.874 123.253 112.874 126.015C112.875 128.776 110.634 131.016 107.872 131.016ZM56.6054 10.088C48.4644 10.088 41.5291 13.1014 35.9914 19.0433C26.869 28.832 23.4994 44.4036 24.2287 54.7295C25.5664 73.6847 37.5101 93.4343 56.3262 106.39C59.6058 104.135 62.7453 101.635 65.7168 98.8979C79.8036 85.9256 88.5928 68.6453 89.2281 52.6736C89.6193 42.8558 85.3823 28.0967 76.528 18.8832C70.9193 13.0474 64.216 10.088 56.6054 10.088Z"
          fill="#1f1f1f"
        />
        <path
          d="M367.05 131.016H362.94C346.03 131.016 329.7 126.564 315.509 118.254C302.08 126.147 286.111 131.016 268.496 131.016H264.181C261.418 131.016 259.178 128.776 259.178 126.014C259.178 123.252 261.418 121.012 264.181 121.012H268.496C281.696 121.012 294.555 117.874 306.141 111.964C304.149 110.441 302.215 108.834 300.343 107.141C284.549 92.862 274.739 74.0149 273.427 55.4339C272.522 42.6017 276.631 24.2638 287.851 12.223C295.252 4.28116 304.911 0.0831299 315.785 0.0831299C326.076 0.0831299 335.459 4.18711 342.921 11.9509C354.277 23.7686 358.88 41.119 358.404 53.0727C357.565 74.1479 345.021 96.5998 324.872 111.966C335.973 117.618 348.848 121.013 362.941 121.013H367.051C369.814 121.013 372.054 123.253 372.054 126.015C372.053 128.776 369.814 131.016 367.05 131.016ZM315.785 10.088C307.644 10.088 300.708 13.1014 295.171 19.0433C286.048 28.832 282.679 44.4036 283.408 54.7295C284.746 73.6847 296.689 93.4353 315.504 106.39C318.784 104.135 321.924 101.635 324.895 98.8979C338.982 85.9256 347.771 68.6453 348.407 52.6736C348.799 42.8558 344.562 28.0967 335.707 18.8822C330.098 13.0464 323.395 10.088 315.785 10.088Z"
          fill="#1f1f1f"
        />
        <path
          d="M237.416 131.016H233.306C216.396 131.016 200.066 126.564 185.875 118.254C172.445 126.147 156.477 131.016 138.861 131.016H134.546C131.784 131.016 129.544 128.776 129.544 126.014C129.544 123.252 131.784 121.012 134.546 121.012H138.861C152.061 121.012 164.921 117.874 176.506 111.964C174.514 110.441 172.58 108.834 170.708 107.141C154.915 92.862 145.104 74.0149 143.792 55.4339C142.887 42.6017 146.996 24.2638 158.216 12.223C165.616 4.28116 175.276 0.0831299 186.149 0.0831299C196.44 0.0831299 205.823 4.18711 213.285 11.9509C224.642 23.7686 229.245 41.119 228.769 53.0727C227.929 74.1479 215.385 96.5998 195.236 111.966C206.338 117.618 219.212 121.013 233.306 121.013H237.416C240.178 121.013 242.418 123.253 242.418 126.015C242.418 128.776 240.178 131.016 237.416 131.016ZM186.149 10.088C178.008 10.088 171.073 13.1014 165.535 19.0433C156.413 28.832 153.043 44.4036 153.772 54.7295C155.11 73.6847 167.054 93.4353 185.869 106.39C189.148 104.135 192.288 101.635 195.259 98.8979C209.346 85.9256 218.135 68.6453 218.771 52.6736C219.162 42.8558 214.925 28.0967 206.071 18.8822C200.462 13.0464 193.76 10.088 186.149 10.088Z"
          fill="#1f1f1f"
        />
        <path
          className={styles.redLight}
          d="M380.388 252.914C405.751 252.914 426.311 232.354 426.311 206.991C426.311 181.629 405.751 161.068 380.388 161.068C355.025 161.068 334.465 181.629 334.465 206.991C334.465 232.354 355.025 252.914 380.388 252.914Z"
          fill="#E0719E"
        />
        <path
          d="M380.388 257.917C352.307 257.917 329.462 235.072 329.462 206.99C329.462 178.91 352.307 156.065 380.388 156.065C408.468 156.065 431.314 178.91 431.314 206.99C431.314 235.072 408.468 257.917 380.388 257.917ZM380.388 166.069C357.824 166.069 339.467 184.426 339.467 206.99C339.467 229.554 357.824 247.912 380.388 247.912C402.952 247.912 421.309 229.554 421.309 206.99C421.309 184.426 402.952 166.069 380.388 166.069Z"
          fill="#1f1f1f"
        />
        <path
          d="M353.537 125.993H407.238V169.422H353.537V125.993Z"
          fill="#1f1f1f"
        />
        <path
          d="M407.238 174.424H353.537C350.775 174.424 348.534 172.184 348.534 169.422V125.993C348.534 123.231 350.775 120.991 353.537 120.991H407.238C410 120.991 412.24 123.231 412.24 125.993V169.422C412.24 172.184 410.001 174.424 407.238 174.424ZM358.539 164.42H402.235V130.995H358.539V164.42Z"
          fill="#1f1f1f"
        />
        <path
          d="M496.33 131.016H492.22C475.31 131.016 458.98 126.564 444.79 118.254C431.36 126.147 415.392 131.016 397.776 131.016H393.461C390.699 131.016 388.459 128.776 388.459 126.014C388.459 123.252 390.699 121.012 393.461 121.012H397.776C410.977 121.012 423.836 117.874 435.42 111.964C433.428 110.441 431.495 108.834 429.623 107.141C413.829 92.862 404.018 74.0149 402.707 55.4339C401.801 42.6017 405.91 24.2638 417.131 12.223C424.532 4.28116 434.191 0.0831299 445.063 0.0831299C455.355 0.0831299 464.739 4.18711 472.199 11.9519C483.556 23.7696 488.159 41.12 487.683 53.0727C486.843 74.1469 474.299 96.5988 454.15 111.966C465.251 117.618 478.125 121.013 492.219 121.013H496.329C499.091 121.013 501.331 123.253 501.331 126.015C501.332 128.776 499.092 131.016 496.33 131.016ZM445.063 10.088C436.923 10.088 429.988 13.1014 424.449 19.0433C415.327 28.832 411.957 44.4036 412.686 54.7295C414.024 73.6847 425.968 93.4343 444.783 106.39C448.063 104.135 451.202 101.635 454.174 98.8979C468.26 85.9256 477.05 68.6453 477.685 52.6736C478.076 42.8558 473.839 28.0967 464.985 18.8832C459.377 13.0474 452.675 10.088 445.063 10.088Z"
          fill="#1f1f1f"
        />
        <path
          className={styles.purpleLight}
          d="M510.056 252.914C535.418 252.914 555.979 232.354 555.979 206.991C555.979 181.629 535.418 161.068 510.056 161.068C484.693 161.068 464.132 181.629 464.132 206.991C464.132 232.354 484.693 252.914 510.056 252.914Z"
          fill="#AAC6FC"
        />
        <path
          d="M510.056 257.917C481.975 257.917 459.13 235.072 459.13 206.99C459.13 178.91 481.975 156.065 510.056 156.065C538.136 156.065 560.982 178.91 560.982 206.99C560.982 235.072 538.136 257.917 510.056 257.917ZM510.056 166.069C487.492 166.069 469.135 184.426 469.135 206.99C469.135 229.554 487.492 247.912 510.056 247.912C532.619 247.912 550.977 229.554 550.977 206.99C550.977 184.426 532.619 166.069 510.056 166.069Z"
          fill="#1f1f1f"
        />
        <path
          d="M483.205 125.993H536.906V169.422H483.205V125.993Z"
          fill="#1f1f1f"
        />
        <path
          d="M536.906 174.424H483.206C480.443 174.424 478.203 172.184 478.203 169.422V125.993C478.203 123.231 480.443 120.991 483.206 120.991H536.906C539.669 120.991 541.909 123.231 541.909 125.993V169.422C541.909 172.184 539.669 174.424 536.906 174.424ZM488.208 164.42H531.904V130.995H488.208V164.42Z"
          fill="#1f1f1f"
        />
        <path
          d="M625.998 131.016H621.888C604.977 131.016 588.648 126.564 574.458 118.254C561.028 126.147 545.06 131.016 527.444 131.016H523.129C520.367 131.016 518.126 128.776 518.126 126.014C518.126 123.252 520.367 121.012 523.129 121.012H527.444C540.644 121.012 553.504 117.874 565.088 111.964C563.096 110.441 561.162 108.834 559.29 107.141C543.497 92.862 533.686 74.0149 532.374 55.4339C531.469 42.6017 535.578 24.2638 546.798 12.223C554.199 4.28116 563.859 0.0831299 574.732 0.0831299C585.023 0.0831299 594.406 4.18711 601.868 11.9509C613.224 23.7686 617.828 41.119 617.351 53.0727C616.512 74.1479 603.968 96.5998 583.819 111.966C594.92 117.618 607.794 121.013 621.888 121.013H625.998C628.76 121.013 631 123.253 631 126.015C631 128.776 628.76 131.016 625.998 131.016ZM574.732 10.088C566.591 10.088 559.656 13.1014 554.118 19.0433C544.995 28.832 541.626 44.4036 542.355 54.7295C543.693 73.6847 555.637 93.4343 574.452 106.39C577.731 104.135 580.871 101.635 583.842 98.8979C597.929 85.9256 606.718 68.6453 607.355 52.6736C607.746 42.8558 603.509 28.0967 594.654 18.8822C589.045 13.0464 582.343 10.088 574.732 10.088Z"
          fill="#1f1f1f"
        />
      </g>
      <defs>
        <clipPath id="clip0_76_789">
          <rect width="631" height="258" fill="white" />
        </clipPath>
      </defs>
    </svg>
  );
};

export default function Lights() {
  const { isDarkTheme, setIsDarkTheme } = useContext(DataContext);
  const [width, setWidth] = useState(0);
  const numberOfLights = Math.floor(width / 122);

  useEffect(() => {
    setWidth(window.innerWidth);

    window.addEventListener("resize", handleResize);

    return () => {
      window.removeEventListener("resize", handleResize);
    };
  }, []);

  const handleResize = () => {
    setWidth(window.innerWidth);
  };

  const handleToggle = () => {
    setIsDarkTheme((prev) => {
      return !prev;
    });
  };

  return (
    <div className={styles.lights}>
      {[...Array(numberOfLights)].map((_, i) => (
        <Light key={i} />
      ))}
      <div className={styles.lightsToggle}>
        <Toggle size="small" checked={isDarkTheme} onChange={handleToggle} />
      </div>
    </div>
  );
}
